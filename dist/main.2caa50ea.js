parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KHfH":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function o(i,o,e){return o&&t(i.prototype,o),e&&t(i,e),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Snake=void 0;var e=function(){function t(){i(this,t),this.coords=[{x:100,y:150},{x:90,y:150},{x:80,y:150},{x:70,y:150},{x:60,y:150}],this.fillColor="lightgreen",this.borderColor="darkgreen",this.vx=10,this.vy=0,this.direction="RIGHT"}return o(t,[{key:"resetCoords",value:function(){this.coords=[{x:100,y:150},{x:90,y:150},{x:80,y:150},{x:70,y:150},{x:60,y:150}],this.vx=10,this.vy=0,this.direction="RIGHT"}},{key:"advance",value:function(i){var t={x:this.coords[0].x+this.vx,y:this.coords[0].y+this.vy};if(this.coords.unshift(t),i.isCollision())throw"Collision...";t.x===i.food.coords.x&&t.y===i.food.coords.y?i.handleEatFood():i.snake.coords.pop()}},{key:"changeDirection",value:function(i){var t=i;37===t&&"RIGHT"!==this.direction&&(this.vx=-10,this.vy=0,this.direction="LEFT"),38===t&&"DOWN"!==this.direction&&(this.vx=0,this.vy=-10,this.direction="UP"),39===t&&"LEFT"!==this.direction&&(this.vx=10,this.vy=0,this.direction="RIGHT"),40===t&&"UP"!==this.direction&&(this.vx=0,this.vy=10,this.direction="DOWN")}}]),t}();exports.Snake=e;
},{}],"zTHW":[function(require,module,exports) {
"use strict";function o(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function e(o,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function r(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Food=void 0;var t=function(){function e(){o(this,e),this.coords={x:50,y:50},this.color="red"}return r(e,[{key:"getRandomCoords",value:function(o){return[10*Math.floor(Math.random()*o/10),10*Math.floor(Math.random()*o/10)]}},{key:"getRandomAndUnusedCoords",value:function(o,e,r){for(var t=this.getRandomCoords(o,e);r.coords.filter(function(o){return o.x===t[0]&&o.y===t[1]}).length;)t=this.getRandomCoords(o,e);return t}},{key:"randomlySetFood",value:function(o,e,r){var t=this.getRandomAndUnusedCoords(o,e,r);this.coords.x=t[0],this.coords.y=t[1]}}]),e}();exports.Food=t;
},{}],"Plx1":[function(require,module,exports) {
"use strict";function t(t){return n(t)||o(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var r=function(){function e(t,o,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s(this,e),this.snake=t,this.food=o,this.canvas=n,this.gameOver=!0,this.score=0,this.context=n.getContext("2d"),this.settings={bgColor:"transparent",borderColor:"black",speed:40,scoreElem:i.scoreElem}}return a(e,[{key:"previewGame",value:function(){this.clearCanvas(),this.drawSnake(),this.drawFood()}},{key:"startGame",value:function(){this.gameOver=!1,this.score=0,this.updateDOMScore(),this.snake.resetCoords(),this.food.randomlySetFood(this.canvas.width,this.canvas.height,this.snake);var t=new CustomEvent("gameStart");window.dispatchEvent(t),this.gameLoop()}},{key:"handleKeyPress",value:function(t){this.gameOver?this.startGame():this.snake.changeDirection(t)}},{key:"gameLoop",value:function(){var t=this;setTimeout(function(){t.clearCanvas();try{t.snake.advance(t)}catch(o){t.drawSnake(),t.gameOver=!0;var e=new CustomEvent("gameOver",{detail:{score:t.score}});return void window.dispatchEvent(e)}t.drawSnake(),t.drawFood(),t.gameLoop()},t.settings.speed)}},{key:"clearCanvas",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.settings.bgColor,this.context.strokestyle=this.settings.borderColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.strokeRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawSnake",value:function(){var t=this;this.snake.coords.forEach(function(e){t.context.fillStyle=t.snake.fillColor,t.context.strokestyle=t.snake.borderColor,t.context.fillRect(e.x,e.y,10,10),t.context.strokeRect(e.x,e.y,10,10)})}},{key:"drawFood",value:function(){this.context.fillStyle=this.food.color,this.context.fillRect(this.food.coords.x,this.food.coords.y,10,10)}},{key:"isCollision",value:function(){var e=this.snake.coords[0];if(e.x<0||e.x>=this.canvas.width)return!0;if(e.y<0||e.y>=this.canvas.height)return!0;var o=t(this.snake.coords);return o.shift(),!!o.filter(function(t){return t.x===e.x&&t.y===e.y}).length}},{key:"handleEatFood",value:function(){this.score++,this.updateDOMScore(),this.food.randomlySetFood(this.canvas.width,this.canvas.height,this.snake)}},{key:"updateDOMScore",value:function(){void 0!==this.settings.scoreElem&&(document.getElementById(this.settings.scoreElem).textContent=this.score)}}]),e}();exports.Game=r;
},{}],"epB2":[function(require,module,exports) {
"use strict";var e=require("./lib/Snake.js"),n=require("./lib/Food.js"),o=require("./lib/Game.js");window.addEventListener("load",function(){var t=new n.Food,a=document.getElementById("game-canvas"),d=new e.Snake,r=new o.Game(d,t,a,{scoreElem:"score"});r.clearCanvas(),document.addEventListener("keydown",function(e){r.handleKeyPress(e.keyCode)})}),window.addEventListener("gameStart",function(e){console.log(e),console.log("start event")}),window.addEventListener("gameOver",function(e){console.log(e),console.log("end event")});
},{"./lib/Snake.js":"KHfH","./lib/Food.js":"zTHW","./lib/Game.js":"Plx1"}]},{},["epB2"], null)
//# sourceMappingURL=/main.2caa50ea.js.map