{"version":3,"sources":["lib/Snake.js","lib/Food.js","lib/Game.js","main.js"],"names":["Snake","coords","x","y","fillColor","borderColor","vx","vy","direction","game","newHead","unshift","isCollision","food","handleEatFood","snake","pop","keyCode","keyPressed","LEFT_KEY","RIGHT_KEY","UP_KEY","DOWN_KEY","Food","color","canvasSize","Math","floor","random","canvasWidth","canvasHeight","rand","getRandomCoords","filter","coord","length","getRandomAndUnusedCoords","Game","canvas","options","gameOver","score","context","getContext","settings","bgColor","speed","scoreElem","clearCanvas","drawSnake","drawFood","updateDOMScore","resetCoords","randomlySetFood","width","height","gameStartEvent","CustomEvent","window","dispatchEvent","gameLoop","startGame","changeDirection","self","setTimeout","advance","e","gameOverEvent","detail","clearRect","fillStyle","strokestyle","fillRect","strokeRect","forEach","snakePart","snakeHead","headlessSnake","shift","undefined","document","getElementById","textContent","addEventListener","previewGame","handleKeyPress","console","log"],"mappings":";;AGAA;;AACA;;AAEA;;AADA;AAGA0D,MAAM,CAACyB,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC3C,MAAMtE,IAAI,GAAG,IAAIU,UAAJ,EAAb;AACA,MAAMe,MAAM,GAAG0C,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAf,CAF2C,CAG3C;;AACA,IFTY1D,ADAAvB,EGSNe,KAAK,GAAG,IAAIf,YAAJ,EAAd;AACA,MAAMuC,OAAO,GAAG;AACfQ,IAAAA,SAAS,EAAE;AFVZ,ADAA,AGSgB,GAAhB,eFTc,CDAA;ACAA,ADAA,AGYd,MAAMtC,IAAI,GAAG,IAAI4B,UAAJ,CAAStB,KAAT,EAAgBF,IAAhB,EAAsByB,MAAtB,EAA8BC,OAA9B,CAAb;AACA9B,EAAAA,IAAI,CAAC2E,WAAL;AFZC,ADAA,AGaDJ,EAAAA,OFbM/E,ADAAA,CGaE,CAACkF,IFbR,ADAA,GCAc,ADAA,CACb,QGYF,CAA0B,SAA1B,EAAqC,UAASjB,CAAT,EAAY;AFZ/ChE,ADACA,AGaFO,IAAAA,EFbCP,ADACA,CCAA,ADAC,CGaC,CFbA,ADAC,AGaAmF,EFdS,CDCb,WGaD,CAAoBnB,CAAC,CAACjD,OAAtB;AFZCd,ADDSA,AGcV,GAFD,CDfYkC,EDIVlC,ADDSA,CCCR,ADDS,ECCP,ADDS;ACDC,ADCb,AGeF,CAbD,IFHE,ADAc,EAEb;ACED,ADFED,AGgBJwD,MHhBIxD,AGgBE,CHhBD,AGgBEiF,EFdA3D,ADFA,EAAJ,GCED,GAAa,KAAb,CEcF,CAAwB,WAAxB,EAAqC,UAAU0C,CAAV,EAAa;AFbhD,ACND,AFGU/D,AGiBV,MHjBUA,CAAC,EAAE,OEHDY,KAAZ,EAAmBF,IAAnB,EAAyByB,MAAzB,EAA+C;AAAA,AFG7C,AGkBFgD,EAAAA,GHpBe,EAGb,CEJ+B/C,CCqB1B,CAACgD,GAAR,CAAYrB,CDrBmC,ACqB/C,uEDrB2C,EAAI;AFI5ChE,AGkBHoF,EAAAA,IHlBGpF,CAAC,EAAE,AGkBC,CAACqF,CHlBN,EGkBF,CAAY,aAAZ;ADtB+C,AFIrCpF,AGmBV,CAJD,KHfWA,CAAC,EAAE;AAAX,AGqBHuD,KHxBgB,CGwBV,CHpBH,AGoBIyB,gBAAP,CAAwB,UAAxB,EFjBiB1D,AEiBmB,UAAUyC,CAAV,CFjBP,CEiBoB;AFhB/C,ACRA,AFIEhE,AGqBH,MHrBGA,CAAC,EEJEa,AFIA,EAAJ,ECIM,CAACW,ACRR,GAAaX,CDQD,CAACY,GCRb,EDQQ,CAAWD,IAAI,CAACE,MAAL,KAAgBH,UAAhB,GAA2B,EAAtC,IAA4C,EAA7C,EAAiDC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBH,UAAhB,GAA2B,EAAtC,IAA4C,EAA7F,CAAP;AACA,ACRA,AFGStB,AGsBVmF,EAAAA,IHtBUnF,CAAC,EEHLU,AFGO,AGsBN,CAAC0E,GDzBP,ACyBD,CAAYrB,CAAZ,CDzBarD,IAAZ;AACA,AFEC,AGuBFyE,EAAAA,GH3Be,EAKb,EEHIhD,ACyBC,CAACiD,GAAR,CAAY,CDzBX,GAAcjD,MAAd,CCyBD;ADxBC,AFEEpC,AGuBH,CAJD,KHnBIA,CAAC,EEFEsC,AFEA,EAAJ,MEFD,GAAgB,IAAhB;AACA,AFCSrC,MAAAA,CAAC,EEDLsC,AFCO,KEDZ,GAAa,CAAb,2BDOwBZ,aAAaC,cAAcf,OAAO;AAC1D,ACPA,AFAC,KALa,CAAd,GEKK2B,CDODX,IAAI,ECPR,CDOW,ECPIO,GDOCN,GCPK,CAACW,UAAP,CDOJ,ACPsB,CDODd,GCPjB,CAAf,ODOW,EAAkCC,YAAlC,CAAX;ACNA,AFCA,SEDKc,AFCAxC,QEDL,CFCA,EEDgB,CFCC,YAAjB;ACOA,ACPCyC,AFCD,MEDCA,GFCIxC,ICMEU,ACPC,EAAE,GDOE,CAACd,CDNb,GAAmB,ECMZ,CAAagC,ECRJ,IDQT,CAAoB,CDN3B,SCM2BC,KAAK;AAAA,ACN/B7B,AFCD,MEDCA,GFCIC,EAAL,GAAU,CCK0B4B,CDLpC,CEDY,EAAE,CDM2B,CAAChC,CAAN,ICRpB,CDQgC6B,IAAI,CAAC,CAAD,CAAhB,IAAuBG,KAAK,CAAC/B,CAAN,KAAY4B,IAAI,CAAC,CAAD,CAA3C;AAAA,ACL/Be,AFCD,MEDCA,CDKM,EAAyEX,ADJ3E5B,EEDC,AFCN,EEDQ,CFCE,CCIV,ACRgB,AFI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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["export class Snake {\n\tconstructor() {\n\t\tthis.coords = [\n\t\t\t{x: 100, y: 150},\n\t\t\t{x: 90, y: 150},\n\t\t\t{x: 80, y: 150},\n\t\t\t{x: 70, y: 150},\n\t\t\t{x: 60, y: 150}\n\t\t];\n\t\tthis.fillColor = 'lightgreen';\n\t\tthis.borderColor = 'darkgreen';\n\t\tthis.vx = 10;\n\t\tthis.vy = 0;\n\t\tthis.direction = 'RIGHT';\n\t}\n\n\tresetCoords() {\n\t\tthis.coords = [\n\t\t\t{x: 100, y: 150},\n\t\t\t{x: 90, y: 150},\n\t\t\t{x: 80, y: 150},\n\t\t\t{x: 70, y: 150},\n\t\t\t{x: 60, y: 150}\n\t\t];\n\t\tthis.vx = 10;\n\t\tthis.vy = 0;\n\t\tthis.direction = 'RIGHT';\n\t}\n\n\tadvance(game) {\n\t\tconst newHead = {x: this.coords[0].x + this.vx, y: this.coords[0].y + this.vy};\n\t\tthis.coords.unshift(newHead);\n\n\t\tif (!game.isCollision()) {\n\t\t\tif (newHead.x === game.food.coords.x && newHead.y === game.food.coords.y) {\n\t\t\t\tgame.handleEatFood();\n\t\t\t} else {\n\t\t\t\tgame.snake.coords.pop();\n\t\t\t}\n\t\t} else {\n\t\t\tthrow (\"Collision...\");\n\t\t}\n\t}\n\n\tchangeDirection(keyCode) {\n\t\tconst keyPressed = keyCode;\n\t\tconst LEFT_KEY = 37;\n\t\tconst RIGHT_KEY = 39;\n\t\tconst UP_KEY = 38;\n\t\tconst DOWN_KEY = 40;\n\n\t\tif (keyPressed === LEFT_KEY && this.direction !== 'RIGHT') {\n\t\t\tthis.vx = -10;\n\t\t\tthis.vy = 0;\n\t\t\tthis.direction = 'LEFT';\n\t\t}\n\t\tif (keyPressed === UP_KEY && this.direction !== 'DOWN') {\n\t\t\tthis.vx = 0;\n\t\t\tthis.vy = -10;\n\t\t\tthis.direction = 'UP';\n\t\t}\n\t\tif (keyPressed === RIGHT_KEY && this.direction !== 'LEFT') {\n\t\t\tthis.vx = 10;\n\t\t\tthis.vy = 0;\n\t\t\tthis.direction = 'RIGHT';\n\t\t}\n\t\tif (keyPressed === DOWN_KEY && this.direction !== 'UP') {\n\t\t\tthis.vx = 0;\n\t\t\tthis.vy = 10;\n\t\t\tthis.direction = 'DOWN';\n\t\t}\n\t}\n}","export class Food {\n\tconstructor() {\n\t\tthis.coords = {\n\t\t\tx: 50,\n\t\t\ty: 50\n\t\t};\n\t\tthis.color = 'red';\n\t}\n\n\tgetRandomCoords(canvasSize) {\n\t\treturn [Math.floor(Math.random() * canvasSize/10) * 10, Math.floor(Math.random() * canvasSize/10) * 10];\n\t}\n\n\tgetRandomAndUnusedCoords(canvasWidth, canvasHeight, snake) {\n\t\tlet rand = this.getRandomCoords(canvasWidth, canvasHeight);\n\n\t\twhile (snake.coords.filter(coord => coord.x === rand[0] && coord.y === rand[1]).length) {\n\t\t\trand = this.getRandomCoords(canvasWidth, canvasHeight);\n\t\t}\n\t\treturn rand;\n\t}\n\n\trandomlySetFood(canvasWidth, canvasHeight, snake) {\n\t\tlet coords = this.getRandomAndUnusedCoords(canvasWidth, canvasHeight, snake);\n\t\tthis.coords.x = coords[0];\n\t\tthis.coords.y = coords[1];\n\t}\n}","export class Game {\n\tconstructor(snake, food, canvas, options = {}) {\n\t\tthis.snake = snake;\n\t\tthis.food = food;\n\t\tthis.canvas = canvas;\n\t\tthis.gameOver = true;\n\t\tthis.score = 0;\n\t\tthis.context = canvas.getContext(\"2d\");\n\t\tthis.settings = {\n\t\t\tbgColor: 'transparent',\n\t\t\tborderColor: 'black',\n\t\t\tspeed: 40,\n\t\t\tscoreElem: options.scoreElem\n\t\t}\n\t}\n\n\tpreviewGame() {\n\t\tthis.clearCanvas();\n\t\tthis.drawSnake();\n\t\tthis.drawFood();\n\t}\n\n\tstartGame() {\n\t\tthis.gameOver = false;\n\t\tthis.score = 0;\n\t\tthis.updateDOMScore();\n\t\tthis.snake.resetCoords();\n\t\tthis.food.randomlySetFood(this.canvas.width, this.canvas.height, this.snake);\n\t\tconst gameStartEvent = new CustomEvent('gameStart');\n\t\twindow.dispatchEvent(gameStartEvent);\n\t\tthis.gameLoop();\n\t}\n\t\n\thandleKeyPress(keyCode) {\n\t\tif (this.gameOver) {\n\t\t\tthis.startGame();\n\t\t} else {\n\t\t\tthis.snake.changeDirection(keyCode);\n\t\t}\n\t}\n\n\tgameLoop() {\n\t\tconst self = this;\n\t\tsetTimeout(function() {\n\t\t\tself.clearCanvas();\n\t\t\ttry {\n\t\t\t\tself.snake.advance(self);\n\t\t\t} catch(e) {\n\t\t\t\tself.drawSnake();\n\t\t\t\tself.gameOver = true;\n\t\t\t\tconst gameOverEvent = new CustomEvent('gameOver', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tscore: self.score\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindow.dispatchEvent(gameOverEvent);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.drawSnake();\n\t\t\tself.drawFood();\n\t\t\tself.gameLoop();\n\t\t}, self.settings.speed);\n\t}\n\n\tclearCanvas() {\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.context.fillStyle = this.settings.bgColor;\n\t\tthis.context.strokestyle = this.settings.borderColor;\n\t\tthis.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.context.strokeRect(0, 0, this.canvas.width, this.canvas.height);\n\t}\n\n\tdrawSnake() {\n\t\tconst self = this;\n\t\tthis.snake.coords.forEach(function(snakePart) {\n\t\t\tself.context.fillStyle = self.snake.fillColor;\n\t\t\tself.context.strokestyle = self.snake.borderColor;\n\t\t\tself.context.fillRect(snakePart.x, snakePart.y, 10, 10);\n\t\t\tself.context.strokeRect(snakePart.x, snakePart.y, 10, 10);\n\t\t});\n\t}\n\n\tdrawFood() {\n\t\tthis.context.fillStyle = this.food.color;\n\t\tthis.context.fillRect(this.food.coords.x, this.food.coords.y, 10, 10);\n\t}\n\n\tisCollision() {\n\t\tconst snakeHead = this.snake.coords[0];\n\t\tif (snakeHead.x < 0 || snakeHead.x >= this.canvas.width) return true;\n\t\telse if (snakeHead.y < 0 || snakeHead.y >= this.canvas.height) return true;\n\t\tlet headlessSnake = [...this.snake.coords];\n\t\theadlessSnake.shift();\n\t\tif (headlessSnake.filter(coords => coords.x === snakeHead.x && coords.y === snakeHead.y).length) return true;\n\t\treturn false;\n\t}\n\n\thandleEatFood() {\n\t\tthis.score++;\n\t\tthis.updateDOMScore();\n\t\tthis.food.randomlySetFood(this.canvas.width, this.canvas.height, this.snake);\n\t}\n\n\tupdateDOMScore() {\n\t\tif (this.settings.scoreElem !== undefined) {\n\t\t\tconst scoreElem = document.getElementById(this.settings.scoreElem);\n\t\t\tscoreElem.textContent = this.score;\n\t\t}\n\t}\n}","import {Snake} from './lib/Snake.js';\nimport {Food} from './lib/Food.js';\n//import {Camera} from './lib/Camera.js';\nimport {Game} from './lib/Game.js';\n\nwindow.addEventListener('load', function () {\n\tconst food = new Food();\n\tconst canvas = document.getElementById(\"game-canvas\");\n\t//const camera = new Camera('game-cube', canvas.width);\n\tconst snake = new Snake();\n\tconst options = {\n\t\tscoreElem: 'score'\n\t};\n\tconst game = new Game(snake, food, canvas, options);\n\tgame.previewGame();\n\tdocument.addEventListener(\"keydown\", function(e) {\n\t\tgame.handleKeyPress(e.keyCode);\n\t});\n});\n\nwindow.addEventListener('gameStart', function (e) {\n\t// e.target matches elem\n\tconsole.log(e);\n\tconsole.log('start event');\n});\n\nwindow.addEventListener('gameOver', function (e) {\n\t// e.target matches elem\n\tconsole.log(e);\n\tconsole.log('end event');\n});"]}